{"ast":null,"code":"import _slicedToArray from\"/home/joaoeira/Documents/amplemarket-gmailExtension/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Template(props){var _props$template=props.template,name=_props$template.name,snippet=_props$template.snippet,id=_props$template.id;function postSnippetToBody(){var message={'action':\"postSnippetToBody\",'snippet':snippet};window.parent.postMessage(message,\"*\");}function deleteSnippet(event){event.stopPropagation();var message={'action':'deleteSnippet','id':id};window.parent.postMessage(message,\"*\");}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex py-2 flex-col h-auto justify-between px-2 hover:bg-gray-100 cursor-pointer\",onClick:postSnippetToBody,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row space-x-1 items-center\",children:[props.isManaging?/*#__PURE__*/_jsx(\"svg\",{onClick:deleteSnippet,xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5 text-gray-700 hover:bg-black hover:text-white rounded-full\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"})}):null,/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 font-medium  flex self-start text-base capitalize\",children:name})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-1 flex self-center w-full text-sm break-all text-justify\",children:snippet})]});}function App(){function saveSnippetFromBody(){var message={'action':\"saveSnippetFromBody\"};window.parent.postMessage(message,\"*\");}function getUser(){var message={'action':\"getUser\"};window.parent.postMessage(message,\"*\");}function handleIsManaging(){setIsManaging(!isManaging);}function fetchContents(){fetch(\"http://localhost:5000/api/getSnippets?user=\".concat(user)).then(function(res){res.json().then(function(data){setTemplates(data);});});}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),templates=_useState2[0],setTemplates=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isManaging=_useState4[0],setIsManaging=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];useEffect(function(){window.addEventListener(\"message\",function(e){if(e.origin===\"https://mail.google.com\"){if(e.data.action===\"fetchContents\"){fetchContents();}if(e.data.action===\"deleteSnippetSuccess\"){fetchContents();}if(e.data.action===\"setUser\"){setUser(e.data.user);}}});getUser();console.log(\"event listener added\");},[]);useEffect(function(){console.log(\"user has been set\");fetchContents();},user);return/*#__PURE__*/_jsxs(\"div\",{className:\"shadow-inner bg-white w-screen h-screen m-0 relative\",children:[/*#__PURE__*/_jsx(\"div\",{style:{scrollbarWidth:\"none\"},className:\"h-4/5 shadow-inner w-full overflow-y-scroll\",children:templates.map(function(template){return/*#__PURE__*/_jsx(Template,{template:{name:template.name,snippet:template.snippet,id:template.id},isManaging:isManaging},template.id);})}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#FAFAFA\"},className:\"shadow absolute bottom-0 h-1/5 w-full border-t-2 border-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pl-2 h-1/2 flex items-center space-x-2 text-sm hover:bg-gray-200 active:bg-gray-300\",onClick:saveSnippetFromBody,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800\",children:\"Turn this draft into a snippet\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pl-2 h-1/2 flex items-center space-x-2 text-sm hover:bg-gray-200 active:bg-gray-300\",onClick:handleIsManaging,children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800\",children:\"Manage snippets\"})]})]})]});}export default App;","map":{"version":3,"sources":["/home/joaoeira/Documents/amplemarket-gmailExtension/ui/src/App.js"],"names":["React","useEffect","useState","Template","props","template","name","snippet","id","postSnippetToBody","message","window","parent","postMessage","deleteSnippet","event","stopPropagation","isManaging","App","saveSnippetFromBody","getUser","handleIsManaging","setIsManaging","fetchContents","fetch","user","then","res","json","data","setTemplates","templates","setUser","addEventListener","e","origin","action","console","log","scrollbarWidth","map","backgroundColor"],"mappings":"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","sourcesContent":["import './App.css';\n\nimport React, {useEffect, useState} from \"react\";\n\nfunction Template(props){\n  const {name, snippet,id} = props.template\n  \n  function postSnippetToBody(){\n    const message = {\n      'action': \"postSnippetToBody\",\n      'snippet': snippet\n    }\n    window.parent.postMessage(message, \"*\")\n  }\n\n  function deleteSnippet(event){\n    event.stopPropagation()\n    const message = {\n      'action': 'deleteSnippet',\n      'id': id\n    }\n    window.parent.postMessage(message, \"*\")\n  }\n\n  return <div className=\"flex py-2 flex-col h-auto justify-between px-2 hover:bg-gray-100 cursor-pointer\" onClick={postSnippetToBody}>\n    \n    <div className=\"flex flex-row space-x-1 items-center\">\n      {props.isManaging? \n        <svg onClick={deleteSnippet} xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-700 hover:bg-black hover:text-white rounded-full\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n        </svg> \n        : null\n      }\n    \n    <p className=\"text-gray-700 font-medium  flex self-start text-base capitalize\">{name}</p>\n    </div>\n    <p className=\"text-gray-500 mt-1 flex self-center w-full text-sm break-all text-justify\">{snippet}</p>\n</div>\n}\n\nfunction App() {\n  \n  function saveSnippetFromBody(){\n    const message = {\n      'action': \"saveSnippetFromBody\",\n    }\n    window.parent.postMessage(message, \"*\")\n  }\n\n  function getUser(){\n    const message = {\n      'action': \"getUser\",\n    }\n    window.parent.postMessage(message, \"*\")\n  }\n\n  function handleIsManaging(){\n    setIsManaging(!isManaging)\n  }\n\n  function fetchContents(){\n    fetch(`http://localhost:5000/api/getSnippets?user=${user}`).then(res => {\n              res.json().then(data => {\n                setTemplates(data)\n              })\n            })\n  }\n  const [templates, setTemplates] = useState([])\n  const [isManaging, setIsManaging] = useState(false)\n  const [user, setUser] = useState(\"\")\n  useEffect(() => {\n    window.addEventListener(\"message\", (e) => {\n      if(e.origin === \"https://mail.google.com\"){\n          if(e.data.action === \"fetchContents\"){\n            fetchContents()\n          }\n          if(e.data.action === \"deleteSnippetSuccess\"){\n            fetchContents()\n          }\n          if(e.data.action === \"setUser\"){\n            setUser(e.data.user)\n          }\n      }\n    })\n\n    getUser()\n    console.log(\"event listener added\")}, [])\n\n    useEffect(() => {\n      console.log(\"user has been set\")\n      fetchContents()\n    }, user)\n  return (\n    <div className=\"shadow-inner bg-white w-screen h-screen m-0 relative\">\n        <div style={{scrollbarWidth: \"none\"}} className=\"h-4/5 shadow-inner w-full overflow-y-scroll\">\n          {templates.map(template => {\n            return <Template key={template.id} template={{name: template.name, snippet: template.snippet, id:template.id}} isManaging={isManaging}/>\n          })}\n        </div>\n      <div style={{backgroundColor:\"#FAFAFA\"}}className=\"shadow absolute bottom-0 h-1/5 w-full border-t-2 border-gray-300\">\n        <div className=\"pl-2 h-1/2 flex items-center space-x-2 text-sm hover:bg-gray-200 active:bg-gray-300\" onClick={saveSnippetFromBody}>\n          <svg \n          xmlns=\"http://www.w3.org/2000/svg\" \n          className=\"h-6 w-6\" \n          fill=\"none\" \n          viewBox=\"0 0 24 24\" \n          stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <p className=\"text-gray-800\">Turn this draft into a snippet</p>\n        </div>\n        <div className=\"pl-2 h-1/2 flex items-center space-x-2 text-sm hover:bg-gray-200 active:bg-gray-300\" onClick={handleIsManaging}>          \n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n          </svg>         \n          <p className=\"text-gray-800\">Manage snippets</p>\n        </div>\n      </div>\n      \n\n\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}