{"ast":null,"code":"import _slicedToArray from\"/home/joaoeira/Documents/amplemarket-gmailExtension/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React,{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Template(props){var _props$template=props.template,name=_props$template.name,snippet=_props$template.snippet,id=_props$template.id;function postSnippetToBody(){var message={action:'postSnippetToBody',snippet:snippet};window.parent.postMessage(message,'*');}function deleteSnippet(event){event.stopPropagation();var message={action:'deleteSnippet',id:id};window.parent.postMessage(message,'*');}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex py-2 flex-col h-auto justify-between px-2 hover:bg-gray-100 cursor-pointer\",onClick:postSnippetToBody,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row space-x-1 items-center\",children:[props.isManaging?/*#__PURE__*/_jsx(\"svg\",{onClick:deleteSnippet,xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5 text-gray-700 hover:bg-black hover:text-white rounded-full\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"})}):null,/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 font-medium  flex self-start text-base capitalize\",children:name})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-1 flex self-center w-full text-sm break-all text-justify\",children:snippet})]});}function App(){function saveSnippetFromBody(){var message={action:'saveSnippetFromBody'};window.parent.postMessage(message,'*');}function getUser(){var message={action:'getUser'};window.parent.postMessage(message,'*');}function handleIsManaging(){setIsManaging(!isManaging);}function fetchContents(){fetch(\"http://localhost:5000/api/getSnippets?user=$user@gmail.com\").then(function(res){res.json().then(function(data){setTemplates(data);});});}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),templates=_useState2[0],setTemplates=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isManaging=_useState4[0],setIsManaging=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];useEffect(function(){window.addEventListener('message',function(e){if(e.origin==='https://mail.google.com'){if(e.data.action==='setUser'){setUser(e.data.user);}}});getUser();},[]);useEffect(function(){if(user!==''){fetchContents();window.addEventListener('message',function(e){if(e.origin==='https://mail.google.com'){if(e.data.action==='fetchContents'){fetchContents();}if(e.data.action==='deleteSnippetSuccess'){fetchContents();}}});}},[user]);return/*#__PURE__*/_jsxs(\"div\",{className:\"shadow-inner bg-white w-screen h-screen m-0 relative\",children:[/*#__PURE__*/_jsx(\"div\",{style:{scrollbarWidth:'none'},className:\"h-4/5 shadow-inner w-full overflow-y-scroll\",children:templates.map(function(template){return/*#__PURE__*/_jsx(Template,{template:{name:template.name,snippet:template.snippet,id:template.id},isManaging:isManaging},template.id);})}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#FAFAFA'},className:\"shadow absolute bottom-0 h-1/5 w-full border-t-2 border-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pl-2 h-1/2 flex items-center space-x-2 text-sm hover:bg-gray-200 active:bg-gray-300\",onClick:saveSnippetFromBody,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800\",children:\"Turn this draft into a snippet\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pl-2 h-1/2 flex items-center space-x-2 text-sm hover:bg-gray-200 active:bg-gray-300\",onClick:handleIsManaging,children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800\",children:\"Manage snippets\"})]})]})]});}export default App;","map":{"version":3,"sources":["/home/joaoeira/Documents/amplemarket-gmailExtension/ui/src/App.js"],"names":["React","useEffect","useState","Template","props","template","name","snippet","id","postSnippetToBody","message","action","window","parent","postMessage","deleteSnippet","event","stopPropagation","isManaging","App","saveSnippetFromBody","getUser","handleIsManaging","setIsManaging","fetchContents","fetch","then","res","json","data","setTemplates","templates","user","setUser","addEventListener","e","origin","scrollbarWidth","map","backgroundColor"],"mappings":"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","sourcesContent":["import './App.css'\n\nimport React, { useEffect, useState } from 'react'\n\nfunction Template(props) {\n    const { name, snippet, id } = props.template\n\n    function postSnippetToBody() {\n        const message = {\n            action: 'postSnippetToBody',\n            snippet: snippet,\n        }\n        window.parent.postMessage(message, '*')\n    }\n\n    function deleteSnippet(event) {\n        event.stopPropagation()\n        const message = {\n            action: 'deleteSnippet',\n            id: id,\n        }\n        window.parent.postMessage(message, '*')\n    }\n\n    return (\n        <div\n            className=\"flex py-2 flex-col h-auto justify-between px-2 hover:bg-gray-100 cursor-pointer\"\n            onClick={postSnippetToBody}\n        >\n            <div className=\"flex flex-row space-x-1 items-center\">\n                {props.isManaging ? (\n                    <svg\n                        onClick={deleteSnippet}\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"h-5 w-5 text-gray-700 hover:bg-black hover:text-white rounded-full\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                    >\n                        <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={2}\n                            d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                        />\n                    </svg>\n                ) : null}\n\n                <p className=\"text-gray-700 font-medium  flex self-start text-base capitalize\">\n                    {name}\n                </p>\n            </div>\n            <p className=\"text-gray-500 mt-1 flex self-center w-full text-sm break-all text-justify\">\n                {snippet}\n            </p>\n        </div>\n    )\n}\n\nfunction App() {\n    function saveSnippetFromBody() {\n        const message = {\n            action: 'saveSnippetFromBody',\n        }\n        window.parent.postMessage(message, '*')\n    }\n\n    function getUser() {\n        const message = {\n            action: 'getUser',\n        }\n        window.parent.postMessage(message, '*')\n    }\n\n    function handleIsManaging() {\n        setIsManaging(!isManaging)\n    }\n\n    function fetchContents() {\n        fetch(\n            `http://localhost:5000/api/getSnippets?user=$user@gmail.com`\n        ).then((res) => {\n            res.json().then((data) => {\n                setTemplates(data)\n            })\n        })\n    }\n    const [templates, setTemplates] = useState([])\n    const [isManaging, setIsManaging] = useState(false)\n    const [user, setUser] = useState('')\n\n    useEffect(() => {\n        window.addEventListener('message', (e) => {\n            if (e.origin === 'https://mail.google.com') {\n                if (e.data.action === 'setUser') {\n                    setUser(e.data.user)\n                }\n            }\n        })\n        getUser()\n    }, [])\n\n    useEffect(() => {\n        if (user !== '') {\n            fetchContents()\n\n            window.addEventListener('message', (e) => {\n                if (e.origin === 'https://mail.google.com') {\n                    if (e.data.action === 'fetchContents') {\n                        fetchContents()\n                    }\n                    if (e.data.action === 'deleteSnippetSuccess') {\n                        fetchContents()\n                    }\n                }\n            })\n        }\n    }, [user])\n\n    return (\n        <div className=\"shadow-inner bg-white w-screen h-screen m-0 relative\">\n            <div\n                style={{ scrollbarWidth: 'none' }}\n                className=\"h-4/5 shadow-inner w-full overflow-y-scroll\"\n            >\n                {templates.map((template) => {\n                    return (\n                        <Template\n                            key={template.id}\n                            template={{\n                                name: template.name,\n                                snippet: template.snippet,\n                                id: template.id,\n                            }}\n                            isManaging={isManaging}\n                        />\n                    )\n                })}\n            </div>\n            <div\n                style={{ backgroundColor: '#FAFAFA' }}\n                className=\"shadow absolute bottom-0 h-1/5 w-full border-t-2 border-gray-300\"\n            >\n                <div\n                    className=\"pl-2 h-1/2 flex items-center space-x-2 text-sm hover:bg-gray-200 active:bg-gray-300\"\n                    onClick={saveSnippetFromBody}\n                >\n                    <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"h-6 w-6\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                    >\n                        <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={1.5}\n                            d=\"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"\n                        />\n                    </svg>\n                    <p className=\"text-gray-800\">\n                        Turn this draft into a snippet\n                    </p>\n                </div>\n                <div\n                    className=\"pl-2 h-1/2 flex items-center space-x-2 text-sm hover:bg-gray-200 active:bg-gray-300\"\n                    onClick={handleIsManaging}\n                >\n                    <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"h-6 w-6\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                    >\n                        <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={1.5}\n                            d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"\n                        />\n                        <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={1.5}\n                            d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                        />\n                    </svg>\n                    <p className=\"text-gray-800\">Manage snippets</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}