{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { v4 as uuidv4 } from 'uuid';\nvar URL = 'http://localhost:5000';\nexport default function Main(props) {\n  var buttonCoordinates = document.querySelector('[aria-label=\"My Nifty Button!\"]').getBoundingClientRect();\n\n  var _useState = useState(buttonCoordinates.x - 400),\n      _useState2 = _slicedToArray(_useState, 2),\n      x = _useState2[0],\n      setX = _useState2[1];\n\n  var _useState3 = useState(buttonCoordinates.y - 500),\n      _useState4 = _slicedToArray(_useState3, 2),\n      y = _useState4[0],\n      setY = _useState4[1];\n\n  var _useState5 = useState('100%'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      opacity = _useState6[0],\n      setOpacity = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      hasEventListener = _useState8[0],\n      setHasEventListener = _useState8[1];\n\n  function messageHandler(e) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : props,\n        sdk = _ref.sdk,\n        sdkEvent = _ref.sdkEvent;\n\n    if (e.origin === URL) {\n      if (e.data.action === 'postSnippetToBody') {\n        sdkEvent.composeView.setBodyText(e.data.snippet);\n      }\n\n      if (e.data.action === 'getUser') {\n        var user = sdk.User.getEmailAddress();\n        var message = {\n          action: 'setUser',\n          user: user\n        };\n        document.getElementById('amplemarketExtension').contentWindow.postMessage(message, '*');\n      }\n\n      if (e.data.action === 'saveSnippetFromBody') {\n        var snippetBody = sdkEvent.composeView.getTextContent();\n        console.log(snippetBody);\n        var name = prompt('Please enter a name for your snippet'); //null if prompt canceled\n\n        if (name !== null && Number(snippetBody) !== 0) {\n          fetch(URL + '/api/addSnippet', {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              user: sdk.User.getEmailAddress(),\n              snippet: snippetBody,\n              name: name === '' ? 'Untitled' : name,\n              id: uuidv4(snippetBody)\n            })\n          }).then(function (res) {\n            if (res.ok) {\n              document.getElementById('amplemarketExtension').contentWindow.postMessage({\n                action: 'fetchContents'\n              }, '*');\n            }\n          })[\"catch\"](function (err) {\n            return console.log(err);\n          });\n        }\n      }\n\n      if (e.data.action === 'deleteSnippet') {\n        fetch(URL + '/api/deleteSnippet', {\n          method: 'POST',\n          mode: 'cors',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            user: sdk.User.getEmailAddress(),\n            id: e.data.id\n          })\n        }).then(function (res) {\n          if (res.ok) {\n            document.getElementById('amplemarketExtension').contentWindow.postMessage({\n              action: 'deleteSnippetSuccess'\n            }, '*');\n          }\n        })[\"catch\"](function (err) {\n          return console.log(err);\n        });\n      }\n    }\n  }\n\n  useEffect(function () {\n    window.addEventListener('message', function (e) {\n      messageHandler(e);\n      setHasEventListener(true);\n    });\n  }, []);\n  useLayoutEffect(function () {\n    if (hasEventListener) {\n      window.removeEventListener('message', function (e) {\n        messageHandler(e);\n      });\n      setHasEventListener(false);\n    }\n  }, [hasEventListener]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'fixed',\n      opacity: opacity,\n      width: '300px',\n      height: '450px',\n      top: String(y) + 'px',\n      left: String(x) + 'px',\n      right: '0px',\n      backgroundColor: 'ghostwhite',\n      boxShadow: \"0 5px 5px 5px rgb(119 119 119 / 25%)\",\n      zIndex: '99999'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      opacity: opacity === '0%' ? '10%' : '100%',\n      position: 'absolute',\n      top: '0px',\n      width: '100%',\n      height: '100%',\n      backgroundColor: '#FAFAFA',\n      boxShadow: '0 8px 6px -6px black'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      width: '100%',\n      position: 'absolute',\n      top: '0px',\n      height: '25px',\n      justifyContent: 'space-between'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", null), /*#__PURE__*/React.createElement(\"div\", {\n    draggable: true,\n    onDragStart: function onDragStart(e) {\n      return setOpacity('10%');\n    },\n    onDragEnd: function onDragEnd(e) {\n      return setOpacity('100%');\n    },\n    onDrag: function onDrag(e) {\n      if (e.clientX !== 0 && e.clientY !== 0) {\n        setX(e.clientX - 158);\n        setY(e.clientY - 12.5);\n      }\n    },\n    style: {\n      height: '100%',\n      width: 'fit-content',\n      position: 'relative',\n      left: '16px',\n      alignItems: 'center',\n      display: 'flex'\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    style: {\n      cursor: 'grab',\n      height: '1rem',\n      width: '1rem',\n      opacity: '80%'\n    },\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M4 6h16M4 12h16M4 18h16\"\n  }))), /*#__PURE__*/React.createElement(\"svg\", {\n    onClick: function onClick(e) {\n      return ReactDOM.unmountComponentAtNode(document.getElementById('extension-wrapper'));\n    },\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    style: {\n      height: '1rem',\n      width: '1rem',\n      alignSelf: 'center',\n      cursor: 'pointer',\n      opacity: '80%',\n      position: 'relative',\n      top: '1px',\n      right: '5px'\n    },\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n  })))), /*#__PURE__*/React.createElement(\"iframe\", {\n    id: \"amplemarketExtension\",\n    style: {\n      opacity: opacity,\n      position: 'relative',\n      top: '25px',\n      height: '100%',\n      width: 'fit-content',\n      margin: '0px',\n      border: 'none'\n    },\n    src: \"http://localhost:5000/templates\"\n  }));\n}","map":{"version":3,"sources":["/home/joaoeira/Documents/amplemarket-gmailExtension/extension/src/js/Main/Main.js"],"names":["React","useEffect","useState","ReactDOM","v4","uuidv4","URL","Main","props","buttonCoordinates","document","querySelector","getBoundingClientRect","x","setX","y","setY","opacity","setOpacity","hasEventListener","setHasEventListener","messageHandler","e","sdk","sdkEvent","origin","data","action","composeView","setBodyText","snippet","user","User","getEmailAddress","message","getElementById","contentWindow","postMessage","snippetBody","getTextContent","console","log","name","prompt","Number","fetch","method","mode","headers","body","JSON","stringify","id","then","res","ok","err","window","addEventListener","useLayoutEffect","removeEventListener","position","width","height","top","String","left","right","backgroundColor","boxShadow","zIndex","display","justifyContent","clientX","clientY","alignItems","cursor","unmountComponentAtNode","alignSelf","margin","border"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { v4 as uuidv4 } from 'uuid'\n\nconst URL = 'http://localhost:5000'\n\nexport default function Main(props) {\n    const buttonCoordinates = document\n        .querySelector('[aria-label=\"My Nifty Button!\"]')\n        .getBoundingClientRect()\n\n    const [x, setX] = useState(buttonCoordinates.x - 400)\n    const [y, setY] = useState(buttonCoordinates.y - 500)\n    const [opacity, setOpacity] = useState('100%')\n    const [hasEventListener, setHasEventListener] = useState(false)\n\n    function messageHandler(e, { sdk, sdkEvent } = props) {\n        if (e.origin === URL) {\n            if (e.data.action === 'postSnippetToBody') {\n                sdkEvent.composeView.setBodyText(e.data.snippet)\n            }\n            if (e.data.action === 'getUser') {\n                const user = sdk.User.getEmailAddress()\n                const message = {\n                    action: 'setUser',\n                    user: user,\n                }\n                document\n                    .getElementById('amplemarketExtension')\n                    .contentWindow.postMessage(message, '*')\n            }\n\n            if (e.data.action === 'saveSnippetFromBody') {\n                const snippetBody = sdkEvent.composeView.getTextContent()\n                console.log(snippetBody)\n                const name = prompt('Please enter a name for your snippet') //null if prompt canceled\n                if (name !== null && Number(snippetBody) !== 0) {\n                    fetch(URL + '/api/addSnippet', {\n                        method: 'POST',\n                        mode: 'cors',\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        body: JSON.stringify({\n                            user: sdk.User.getEmailAddress(),\n                            snippet: snippetBody,\n                            name: name === '' ? 'Untitled' : name,\n                            id: uuidv4(snippetBody),\n                        }),\n                    })\n                        .then((res) => {\n                            if (res.ok) {\n                                document\n                                    .getElementById('amplemarketExtension')\n                                    .contentWindow.postMessage(\n                                        {\n                                            action: 'fetchContents',\n                                        },\n                                        '*'\n                                    )\n                            }\n                        })\n                        .catch((err) => console.log(err))\n                }\n            }\n\n            if (e.data.action === 'deleteSnippet') {\n                fetch(URL + '/api/deleteSnippet', {\n                    method: 'POST',\n                    mode: 'cors',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({\n                        user: sdk.User.getEmailAddress(),\n                        id: e.data.id,\n                    }),\n                })\n                    .then((res) => {\n                        if (res.ok) {\n                            document\n                                .getElementById('amplemarketExtension')\n                                .contentWindow.postMessage(\n                                    {\n                                        action: 'deleteSnippetSuccess',\n                                    },\n                                    '*'\n                                )\n                        }\n                    })\n                    .catch((err) => console.log(err))\n            }\n        }\n    }\n\n    useEffect(() => {\n        window.addEventListener('message', (e) => {\n            messageHandler(e)\n            setHasEventListener(true)\n        })\n    }, [])\n\n    useLayoutEffect(() => {\n        if (hasEventListener) {\n            window.removeEventListener('message', (e) => {\n                messageHandler(e)\n            })\n            setHasEventListener(false)\n        }\n    }, [hasEventListener])\n\n    return (\n        <div\n            style={{\n                position: 'fixed',\n                opacity: opacity,\n                width: '300px',\n                height: '450px',\n                top: String(y) + 'px',\n                left: String(x) + 'px',\n                right: '0px',\n                backgroundColor: 'ghostwhite',\n                boxShadow: `0 5px 5px 5px rgb(119 119 119 / 25%)`,\n                zIndex: '99999',\n            }}\n        >\n            <div\n                style={{\n                    opacity: opacity === '0%' ? '10%' : '100%',\n                    position: 'absolute',\n                    top: '0px',\n                    width: '100%',\n                    height: '100%',\n                    backgroundColor: '#FAFAFA',\n                    boxShadow: '0 8px 6px -6px black',\n                }}\n            >\n                <div\n                    style={{\n                        display: 'flex',\n                        width: '100%',\n                        position: 'absolute',\n                        top: '0px',\n                        height: '25px',\n                        justifyContent: 'space-between',\n                    }}\n                >\n                    <div></div>\n                    <div\n                        draggable={true}\n                        onDragStart={(e) => setOpacity('10%')}\n                        onDragEnd={(e) => setOpacity('100%')}\n                        onDrag={(e) => {\n                            if (e.clientX !== 0 && e.clientY !== 0) {\n                                setX(e.clientX - 158)\n                                setY(e.clientY - 12.5)\n                            }\n                        }}\n                        style={{\n                            height: '100%',\n                            width: 'fit-content',\n                            position: 'relative',\n                            left: '16px',\n                            alignItems: 'center',\n                            display: 'flex',\n                        }}\n                    >\n                        <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            style={{\n                                cursor: 'grab',\n                                height: '1rem',\n                                width: '1rem',\n                                opacity: '80%',\n                            }}\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                        >\n                            <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth={2}\n                                d=\"M4 6h16M4 12h16M4 18h16\"\n                            />\n                        </svg>\n                    </div>\n                    <svg\n                        onClick={(e) =>\n                            ReactDOM.unmountComponentAtNode(\n                                document.getElementById('extension-wrapper')\n                            )\n                        }\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        fill=\"none\"\n                        style={{\n                            height: '1rem',\n                            width: '1rem',\n                            alignSelf: 'center',\n                            cursor: 'pointer',\n                            opacity: '80%',\n                            position: 'relative',\n                            top: '1px',\n                            right: '5px',\n                        }}\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                    >\n                        <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={2}\n                            d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                        />\n                    </svg>\n                </div>\n            </div>\n            <iframe\n                id=\"amplemarketExtension\"\n                style={{\n                    opacity: opacity,\n                    position: 'relative',\n                    top: '25px',\n                    height: '100%',\n                    width: 'fit-content',\n                    margin: '0px',\n                    border: 'none',\n                }}\n                src=\"http://localhost:5000/templates\"\n            ></iframe>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}